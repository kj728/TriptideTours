<div class="dynamic-view-manager">

    <!-- TOURS VIEW USER -->
    <div class="tours-view" id="app-tours">

        <div class="utv-left" id="diplayUserTours" *ngIf="allTours">

            <div class="tour-card" *ngFor="let tour of allTours; let i= index">
                <div class="tcard-head">
                    <h1>{{tour.tourname|shortenDescription:20}}</h1>
                </div>
                <div class="tcard-body">
                    <h2>Destination: {{tour.tdestination}}</h2>
                    <p>{{tour.tdescription |shortenDescription:170}}</p>
                    <h3>Price: {{tour.tprice| currency:"Ksh"}}</h3>
                </div>

                <div class="edit-del">
                    <input id="btnBookNow" type="button" value="Book Now" (click)="startBookingProcess(i)">
                    <!-- <input id="btnEditTour" type="button" value="Edit Tour" (click)="editTour(i)">
                <i class='bx bxs-trash-alt' (click)="deleteTour(i)"></i> -->
                </div>


            </div>

        </div>

        <div class="utv-right" id="diplayUserTours">
            <h2>Book Now</h2>
            <form (ngSubmit)="onSubmit()" [formGroup]="userToursBookingForm">
                <label for="tourName">Tour Name</label>
                <span id="tourIdBooking">1</span>
                <label for="tourNametTV" id="lblTourName">{{tourName}} </label>
                <!-- <input type="text" id="tourName" name="tourName" required> -->

                <label for="tourDate">Tour Start Date:</label>
                <input type="date" id="tourSDate" name="tourDate" formControlName="bstartdate">
                <div
                    *ngIf="userToursBookingForm.get('bstartdate')?.touched && !userToursBookingForm.get('bstartdate')?.valid">
                    <p class="error-message" *ngIf="userToursBookingForm.get('bstartdate')?.hasError('required')">
                        <i>Booking start date is required</i>
                    </p>

                </div>

                <label for="tourDate">Tour End Date:</label>
                <input type="date" id="tourEDate" name="tourDate" formControlName="benddate">
                <div
                    *ngIf="userToursBookingForm.get('benddate')?.touched && !userToursBookingForm.get('benddate')?.valid">
                    <p class="error-message" *ngIf="userToursBookingForm.get('benddate')?.hasError('required')">
                        <i>Booking end date is required</i>
                    </p>

                </div>


                <label for="hotelSelection">Select Hotel:</label>
                <div>
                    <select id="hotelSelection" name="hotelSelection" formControlName="bhotelindex">
                        <option value="" selected disabled>Select Hotel</option>
                        <option *ngFor="let hotel of filteredHotels; let i = index" value="{{i}}">{{hotel.hotelname}}
                        </option>
                        <!-- <option value="hotel2">Hotel 2</option> -->
                    </select>
                    <div
                        *ngIf="userToursBookingForm.get('bhotelindex')?.touched && !userToursBookingForm.get('bhotelindex')?.valid">
                        <p class="error-message" *ngIf="userToursBookingForm.get('bhotelindex')?.hasError('required')">
                            <i>Hotel is required</i>
                        </p>

                    </div>



                </div>


                <label for="tourGuests">Number of Guests:</label>
                <input type="number" id="tourGuests" name="tourGuests" value="1" formControlName="bguests">
                <div
                *ngIf="userToursBookingForm.get('bguests')?.touched && !userToursBookingForm.get('bguests')?.valid">
                <p class="error-message" *ngIf="userToursBookingForm.get('bguests')?.hasError('required')">
                    <i>Nunber of guests is required</i>
                </p>
                <p class="error-message" *ngIf="userToursBookingForm.get('bguests')?.hasError('min')">
                    <i>Number of guests is cannot be below 1</i>
                </p>

            </div>

                <input type="submit" value="Proceed" id="app-proceed" >
            </form>

        </div>

    </div>


</div>